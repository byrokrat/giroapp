parameters:
    db.settings: 'data/settings.json'
    db.donors: 'data/donors.json'
    db.transactions: 'data/transactions.json'
    db.log: 'var/log'

services:
    settings_mapper:
        class: byrokrat\giroapp\Mapper\SettingsMapper
        arguments: ['@db_settings_collection']

    db_settings_collection:
        class: hanneskod\yaysondb\Collection
        arguments: ['@db_settings_engine']

    db_settings_engine:
        class: hanneskod\yaysondb\Engine\FlysystemEngine
        arguments: ['%db.settings%', '@filesystem']

    donor_mapper:
        class: byrokrat\giroapp\Mapper\DonorMapper
        arguments: ['@db_donors_collection']

    db_donors_collection:
        class: hanneskod\yaysondb\Collection
        arguments: ['@db_donors_engine']

    db_donors_engine:
        class: hanneskod\yaysondb\Engine\FlysystemEngine
        arguments: ['%db.donors%', '@filesystem']

    transaction_mapper:
        class: byrokrat\giroapp\Mapper\TransactionMapper
        arguments: ['@db_transactions_collection']

    db_transactions_collection:
        class: hanneskod\yaysondb\Collection
        arguments: ['@db_transactions_engine']

    db_transactions_engine:
        class: hanneskod\yaysondb\Engine\FlysystemEngine
        arguments: ['%db.transactions%', '@filesystem']

    db_log_collection:
        class: hanneskod\yaysondb\Collection
        arguments: ['@db_log_engine']

    db_log_engine:
        class: hanneskod\yaysondb\Engine\LogEngine
        arguments: ['%user.dir%/%db.log%', '@db_log_formatter']

    db_log_formatter:
        class: byrokrat\giroapp\LogFormatter
