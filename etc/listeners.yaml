services:
    _defaults:
        public: false
        autowire: true

    byrokrat\giroapp\Listener\MonitoringListener:
        class: ~
        tags:
            - { name: event_listener, event: byrokrat\giroapp\Event\ExecutionStarted, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ExecutionStopped, method: onLogEvent, priority: -10 }
            - { name: event_listener, event: FILE_IMPORTED, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ExportGenerated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: FILE_FORCEFULLY_IMPORTED, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorAdded, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorAmountUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorAttributeUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorCommentUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorEmailUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorNameUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorPhoneUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorPostalAddressUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorRemoved, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\DonorStateUpdated, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ChangesCommitted, method: onLogEvent, priority: 10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ChangesDiscarded, method: onLogEvent, priority: 10 }

    byrokrat\giroapp\Listener\LoggingListener:
        class: ~
        tags:
            - { name: event_listener, priority: 10, event: byrokrat\giroapp\Event\LogEvent, method: onLogEvent }

    byrokrat\giroapp\Listener\ImportHistoryListener:
        class: ~
        tags:
            - { name: event_listener, event: FILE_IMPORTED, priority: 10 }

    file_import_dumper:
        class: byrokrat\giroapp\Listener\FileDumpingListener
        arguments: ['@fs_imports', '@byrokrat\giroapp\Filesystem\RenamingProcessor']
        tags:
            - { name: event_listener, event: FILE_IMPORTED,            method: onFileEvent, priority: -10 }
            - { name: event_listener, event: FILE_FORCEFULLY_IMPORTED, method: onFileEvent, priority: -10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ExecutionStopped, method: onExecutionStopped, priority: 10 }

    file_export_dumper:
        class: byrokrat\giroapp\Listener\FileDumpingListener
        arguments: ['@fs_exports', '@byrokrat\giroapp\Filesystem\RenamingProcessor']
        tags:
            - { name: event_listener, event: byrokrat\giroapp\Event\ExportGenerated, method: onFileEvent, priority: -10 }
            - { name: event_listener, event: byrokrat\giroapp\Event\ExecutionStopped, method: onExecutionStopped, priority: 10 }

    byrokrat\giroapp\Listener\FileImportingListener:
        class: ~
        tags:
            - { name: event_listener, event: FILE_IMPORTED }
            - { name: event_listener, event: FILE_FORCEFULLY_IMPORTED, method: onFileImported }

    byrokrat\giroapp\Listener\AutogiroImportingListener:
        class: ~
        tags:
            - { name: event_listener, event: AUTOGIRO_FILE_IMPORTED }

    byrokrat\giroapp\Listener\XmlImportingListener:
        class: ~
        tags:
            - { name: event_listener, event: XML_FILE_IMPORTED }

    byrokrat\giroapp\Listener\MandateResponseListener:
        class: ~
        tags:
            - { name: event_listener, event: MANDATE_RESPONSE_RECEIVED }
