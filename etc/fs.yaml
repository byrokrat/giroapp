services:
    _defaults:
        public: false
        autowire: true

    byrokrat\giroapp\Filesystem\:
        resource: '../src/Filesystem/*'

    fs_cwd:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["."]

    fs_imports:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["@=service('ini').getConfigValue('imports_dir')"]
        configurator: 'setup_mkdir:createFiles'

    fs_exports:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["@=service('ini').getConfigValue('exports_dir')"]
        configurator: 'setup_mkdir:createFiles'

    fs_plugins:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["@=service('ini').getConfigValue('plugins_dir')"]
        configurator: 'setup_mkdir:createFiles'

    fs_data:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["@=service('ini').getConfigValue('data_dir')"]
        configurator: 'setup_data:createFiles'

    setup_data:
        class: byrokrat\giroapp\Filesystem\FilesystemConfigurator
        arguments:
            - ['.']
            - ['%db.donors%', '%db.imports%']

    fs_external_data:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ["@=service('ini').getConfigValue('external_data_dir')"]
        configurator: 'setup_mkdir:createFiles'

    setup_mkdir:
        class: byrokrat\giroapp\Filesystem\FilesystemConfigurator
        arguments: [['.']]

    Symfony\Component\Filesystem\Filesystem:
        class: ~
