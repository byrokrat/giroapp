parameters:
    fs.user_dir: '%env(GIROAPP_PATH)%'
    fs.internal_data_dir: 'data'
    fs.external_data_dir: 'var'
    fs.plugins_dir: '%fs.user_dir%/plugins'
    fs.imports_dir: '%fs.user_dir%/%fs.external_data_dir%/imports'
    fs.exports_dir: '%fs.user_dir%/%fs.external_data_dir%/exports'

services:
    _defaults:
        public: false
        autowire: true

    byrokrat\giroapp\Filesystem\:
        resource: '../src/Filesystem/*'

    fs_user_dir:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ['%fs.user_dir%']

    fs_cwd:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ['.']

    fs_imports:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ['%fs.imports_dir%']
        configurator: 'byrokrat\giroapp\Filesystem\FilesystemConfigurator:createCurrentDirectory'

    fs_exports:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ['%fs.exports_dir%']
        configurator: 'byrokrat\giroapp\Filesystem\FilesystemConfigurator:createCurrentDirectory'

    fs_plugins:
        class: byrokrat\giroapp\Filesystem\Filesystem
        arguments: ['%fs.plugins_dir%']
        configurator: 'byrokrat\giroapp\Filesystem\FilesystemConfigurator:createCurrentDirectory'

    Symfony\Component\Filesystem\Filesystem:
        class: ~
